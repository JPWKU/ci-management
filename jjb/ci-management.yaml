---
- project:
    name: ci-management-jobs
    project: ci-management
    jobs:
      - '{project-name}-github-ci-jobs'
      - '{project-name}-github-test'

    project-name: ci-management
    build-node: centos7-basebuild-2c-1g

- job-template:
    name: '{project-name}-github-test'
    <<: *lf_jjb_verify_merge
    # yamllint disable-line rule:key-duplicates
    <<: *lf_jjb_merge_builders

    properties:
      - github:
          url: '$ghprbAuthorRepoGitUrl'


    scm:
      - lf-infra-github-scm:
          url: '$ghprbAuthorRepoGitUrl'
          choosing-strategy: default
          jenkins-ssh-credential: '{jenkins-ssh-credential}'
          refspec: '+refs/pull/*:refs/remotes/origin/pr/*'
          branch: ''
          submodule-recursive: true

    triggers:
      - github-pull-request:
          trigger-phrase: '^recheck$'
          only-trigger-phrase: false

    builders:
      - shell: echo "Hello"
